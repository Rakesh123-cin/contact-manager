<!DOCTYPE html>
<html lang="en"
      th:replace="~{base :: parent(~{::#content}, ~{::title}, ~{::script})}">
<head>
    <title>Send Email | Contact Manager</title>
</head>

<body>
<div id="content"
     class="pt-24 min-h-screen
            bg-gray-50 dark:bg-gray-900
            transition-colors duration-300">

    <!-- ===== Main Layout ===== -->
    <div class="flex max-w-7xl mx-auto">

        <!-- ===== Sidebar ===== -->
        <div th:if="${loggedInUser}" class="w-64 shrink-0">
            <div th:replace="~{user/sidebar::sidebar}"></div>
        </div>

        <!-- ===== Main Content Area ===== -->
        <div class="flex-1 px-6 flex justify-center">
            <div class="w-full max-w-3xl
                        bg-white dark:bg-gray-800
                        rounded-2xl shadow-lg
                        p-8 mt-6 mb-10">

                <h1 class="text-3xl font-bold mb-8
                           text-gray-800 dark:text-gray-100
                           flex items-center gap-2">
                    ðŸ“§ Send Email
                </h1>
                <p  th:if="${errormessage}"
                    class="text-red-600 px-1 py-1" th:text="${errormessage}">
                </p>
                <form method="post"
                      th:action="@{'/user/send-mail'}"
                      enctype="multipart/form-data"
                      onsubmit="syncEditorContent()"
                      class="space-y-6">

                    <!-- To -->
                    <div>
                        <label class="block text-sm font-medium mb-1
                              text-gray-700 dark:text-gray-300"> To
                        </label>
                        <input type="email" name="to" required
                            placeholder="recipient@email.com"
                            class="w-full rounded-lg
                                    bg-white dark:bg-gray-700
                                    border border-gray-300 dark:border-gray-600
                                    text-gray-900 dark:text-gray-100
                                    focus:ring-blue-500 focus:border-blue-500">
                    </div>

                    <!-- Subject -->
                    <div>
                        <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300"> Subject
                        </label>
                        <input type="text" name="subject" required
                            placeholder="Email subject"
                            class="w-full rounded-lg
                                    bg-white dark:bg-gray-700
                                    border border-gray-300 dark:border-gray-600
                                    text-gray-900 dark:text-gray-100
                                    focus:ring-blue-500 focus:border-blue-500">
                    </div>

                    <!-- Message -->
                    <div>
                        <label class="form-label mb-2">Message</label>

                        <div id="editor"
                             class="bg-white dark:bg-gray-700
                                    text-gray-900 dark:text-gray-100
                                    rounded-lg border
                                    border-gray-300 dark:border-gray-600
                                    min-h-[220px]">
                        </div>

                        <input type="hidden" name="body" id="emailBody">
                    </div>

                    <!-- Attachment -->
                    <div>
                        <label class="form-label">Attachment</label>
                        <input type="file" name="attachment"
                               class="block w-full text-sm
                                      text-gray-600 dark:text-gray-300
                                      file:mr-4 file:py-2 file:px-4
                                      file:rounded-lg file:border-0
                                      file:bg-blue-600 file:text-white
                                      hover:file:bg-blue-700">
                    </div>

                    <!-- Actions -->
                    <div class="flex gap-4 pt-4">
                        <button type="submit"
                            class="px-4 py-2 rounded-lg
                                bg-blue-600 hover:bg-blue-700
                                dark:bg-blue-500 dark:hover:bg-blue-600
                                text-white font-semibold transition">
                                Send Email
                        </button>

                         <button type="reset"
                            class="px-4 py-2 rounded-lg
                                border border-gray-300 dark:border-gray-600
                                text-gray-700 dark:text-gray-300
                                hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                                Clear
                        </button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>

<!-- ===== Quill JS ===== -->
<script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>

<script>
    const quill = new Quill('#editor', {
        theme: 'snow',
        placeholder: 'Write your email...',
        modules: {
            toolbar: [
                ['bold', 'italic', 'underline'],
                [{ list: 'ordered' }, { list: 'bullet' }],
                ['link', 'image'],
                ['clean']
            ]
        }
    });

    function syncEditorContent() {
        document.getElementById('emailBody').value = quill.root.innerHTML;
    }
</script>
</body>
</html>